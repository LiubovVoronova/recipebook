<h2>New Recipe</h2>
<hr>
<div class="col-md-6">
  <h3>[Recipe name]</h3>
  <form #newRecipeForm="ngForm" (ngSubmit)="saveNewRecipe(newRecipeForm.value)" autocomplete="off" novalidate>
    <div class="form-group"
         [ngClass]="{'error': newRecipeForm.controls.name?.invalid && newRecipeForm.controls.name?.touched}">
      <label for="recipeName">Recipe Name:</label>
      <em *ngIf="newRecipeForm.controls.name?.invalid && (newRecipeForm.controls.name?.touched)">Required</em>
      <input (ngModel)="newRecipe.title" name="title" required id="recipeName" type="text" class="form-control" placeholder="Name of your recipe" />
    </div>
    <div class="form-group"
         [ngClass]="{'error': newRecipeForm.controls.category?.invalid && newRecipeForm.controls.category?.touched}">
      <label for="recipeCategory">Recipe category:</label>
      <em *ngIf="newRecipeForm.controls.category?.invalid && (newRecipeForm.controls.category?.touched)">Required</em>
      <select (ngModel)="newRecipe.category" name="category" required id="recipeCategory" class="form-control">
        <option>Breakfast</option>
        <option>Starter</option>
        <option>Dessert</option>
        <option>Vegetarian</option>
      </select>
    </div>
    <div class="form-group"
         [ngClass]="{'error': newRecipeForm.controls.area?.invalid && newRecipeForm.controls.area?.touched}">
      <label for="recipeArea">Recipe area:</label>
      <em *ngIf="newRecipeForm.controls.area?.invalid && (newRecipeForm.controls.area?.touched)">Required</em>
      <input (ngModel)="newRecipe.area" name="area" required id="RecipeArea" type="text" class="form-control" placeholder="which country recipe belongs to" />
    </div>
    <div class="form-group"
         [ngClass]="{'error': newRecipeForm.controls.description?.invalid && newRecipeForm.controls.description?.touched}">
      <label for="RecipeDescription">Recipe description:</label>
      <em *ngIf="newRecipeForm.controls.description?.invalid && (newRecipeForm.controls.description?.touched)">Required</em>
      <textarea (ngModel)="newRecipe.description" name="description" required id="RecipeDescription" class="form-control" placeholder="Recipe description">
      </textarea>
    </div>

    <div ngModelGroup="ingredients">
      <div class="form-group">
        <p>Recipe Ingredients:</p>
      </div>
      <div class="row">
        <div class="col-md-6">
          <input (ngModel)="newIngredient.name" name="ingName" id="ingName" type="text" class="form-control" placeholder="Ingredient name" />
        </div>
        <div class="col-md-6" >
          <input (ngModel)="newIngredient.measure" name="measure" id="measure" type="text" class="form-control" placeholder="Measure" />
        </div>
      </div>
    </div>

    <div class="form-group"
         [ngClass]="{'error': newRecipeForm.controls.imageUrl?.invalid && newRecipeForm.controls.imageUrl?.touched}">
      <label for="imageUrl">Image:</label>
      <em *ngIf="newRecipeForm.controls.imageUrl?.invalid && newRecipeForm.controls.imageUrl?.touched && newRecipeForm.controls.imageUrl?.errors.required">Required</em>
      <em *ngIf="newRecipeForm.controls.imageUrl?.invalid && newRecipeForm.controls.imageUrl?.touched  && newRecipeForm.controls.imageUrl?.errors.pattern">Must be a png or jpg url</em>
      <input (ngModel)="newRecipe.image" name="image" required pattern=".*\/.*.(png|jpg)" id="imageUrl" type="text" class="form-control" placeholder="url of image" />
      <img [src]="newRecipeForm.controls.imageUrl.value" *ngIf="newRecipeForm.controls.imageUrl?.valid" width="150px"/>
    </div>

    <button type="submit" class="btn btn-primary">Save</button>
    <button
      type="button"
      class="btn btn-default"
      (click)="returnToMain()">Cancel</button>
  </form>
</div>
